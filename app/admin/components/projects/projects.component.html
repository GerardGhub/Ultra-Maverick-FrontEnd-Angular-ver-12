<div class="row">
  <div class="col-xl-12 col-lg-9 mx-auto divForModuleTable">
    <nav aria-label="breadcrumb textStyle">

      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a [routerLink]="[  '/admin', 'dashboard'  ]">
            <p class="dashboardStyle"><i class="fa fa-home" aria-hidden="true"></i> Dashboard</p>
          </a></li>
        <li class="breadcrumb-item dashboardActive" aria-current="page"> QC Receiving </li>
      </ol>


    </nav>

    <mat-tab-group mat-align-tabs="start" (selectedTabChange)="poRecievingTabforRefresh($event)">

      <ng-template [ngIf]="PoReceiving === 1">
        <mat-tab>

          <ng-template mat-tab-label>
            PO Receiving
            &nbsp; <span class="badge badge-danger zerobadge{{ totalPoRowCount | number}}">{{ totalPoRowCount }}</span>
          </ng-template>

          <!-- filter -->
          <div class="col-sm-12" style="padding-top: 2em;">
            <div class="d-flex">
              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-filter"></span></span>
                  </div>
                  <select class="form-control" id="drpSearchBy" name="SearchBy" [(ngModel)]="searchBy"
                    (selectionChange)="HideSearchBtn($event)">
                    <option value="po_number">PO NUMBER</option>
                    <option value="item_code">ITEM CODE</option>
                  </select>
                </div>
              </div>

              <div>

              </div>

              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-search"></span></span>
                  </div>
                  <input type="search" class="form-control" placeholder="Find here...." id="txtSearchText"
                    name="SearchText" autocomplete="off" [(ngModel)]="searchText" (keyup)="onSearchTextKeyup($event)" />
                </div>
              </div>
            </div>
          </div>

          <!-- <button (click)="any($event)">Method 1</button> -->


          <!-- table -->
          <div class="col-lg-12">
            <div class="d-flex">
              <div class="col-xl-12 col-lg-9 mx-auto scrollableTableMain tbl-text">
                <!-- table table-striped table-bordered nowrap table-responsive-sm -->
                <table class="" style="width: 100%">
                  <thead>
                    <tr class="text-light header-bg-color-um system-name">
                      <th>PO No.</th>
                      <th>Item Code</th>
                      <th>Description</th>
                      <th>Supplier</th>
                      <th>Qty Ordered</th>
                      <th>Remaining</th>
                      <th class="text-center">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="let project of projects | filter: searchBy:searchText | paging: currentPageIndex:pageSize; let i = index">
                      <td>{{ project.po_number }}</td>
                      <td>{{ project.item_code }}</td>
                      <td class="td-text-left">{{ project.item_description }}</td>
                      <td class="td-text-left">{{ project.supplier | uppercase }}</td>
                      <td>{{ project.qty_order | number: "1.0":"en-US" }}</td>
                      <td>{{ project.actual_remaining_receiving | number: "1.0":"en-US" }}
                      </td>

                      <td class="text-center">
                        <!-- <button mat-stroked-button color="primary" class="editbtnStyle" (click)="onEditClick($event, i)"
                          data-toggle="modal" data-target="#editModal" data-backdrop="false" title="For Checklist"
                          data-keyboard="false">
                          <span class="fa fa-check-circle"></span> Checklist
                        </button> -->
                        <button mat-stroked-button color="primary" class="editbtnStyle" (click)="onEditClick($event, i)"
                        data-toggle="modal" data-target="#editModal" data-backdrop="false" title="For Checklist"
                        data-keyboard="false">
                        <span class="fa fa-check-circle"></span> Checklist
                      </button>
                        <ng-container *ngIf="
                          loginService.currentUserName != null &&
                          loginService.currentUserRoleSession == 'Admin'
                        ">
                          <button mat-stroked-button class="editbtnStyle" color="warn"
                            (click)="onCancelClick($event, i)" data-toggle="modal"
                            data-target="#CancelledTransactionModal" data-backdrop="false" data-keyboard="false"
                            title="Cancel PO">
                            <span class="fa fa-ban"></span> Cancel
                          </button>&nbsp;
                        </ng-container>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- <button (click)="mapArrayData()">click</button> -->
          </div>

          <!-- pagination -->
          <div class="col-sm-12">
            <ul class="pagination paginationStyle justify-content-center mt-1">
              <li class="page-item" (click)="onPageIndexClicked(currentPageIndex - 1)">
                <a mat-stroked-button color="primary" class="mr-1 font-color-black" href="#"
                  onclick="return false">Prev</a>
              </li>

              <ng-container *ngIf="pages.length <= 10">
                <li class="page-item" *ngFor="let page of pages" [ngClass]="{
                  'link-active-paging': page.pageIndex == currentPageIndex
                }" (click)="onPageIndexClicked(page.pageIndex)">
                  <a class="page-link" href="#" onclick="return false">{{
                    page.pageIndex + 1
                    }}</a>
                </li>
              </ng-container>

              <ng-container *ngIf="pages.length > 10">
                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == 0 }"
                  (click)="onPageIndexClicked(0)">
                  <a class="page-link" href="#" onclick="return false">1</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == 1 }"
                  (click)="onPageIndexClicked(1)">
                  <a class="page-link" href="#" onclick="return false">2</a>
                </li>

                <li *ngIf="currentPageIndex > 1 && currentPageIndex < pages.length - 2">
                  &nbsp;...&nbsp;
                </li>

                <li class="page-item" [ngClass]="'link-active-paging'" (click)="onPageIndexClicked(currentPageIndex)"
                  *ngIf="currentPageIndex > 1 && currentPageIndex < pages.length - 2">
                  <a class="page-link" href="#" onclick="return false">{{
                    currentPageIndex + 1
                    }}</a>
                </li>

                <li>&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]="{
                  'link-active-paging': currentPageIndex == pages.length - 2
                }" (click)="onPageIndexClicked(pages.length - 2)">
                  <a class="page-link" href="#" onclick="return false">{{
                    pages.length - 1
                    }}</a>
                </li>

                <li class="page-item" [ngClass]="{
                  'link-active-paging': currentPageIndex == pages.length - 1
                }" (click)="onPageIndexClicked(pages.length - 1)">
                  <a class="page-link" href="#" onclick="return false">{{
                    pages.length
                    }}</a>
                </li>
              </ng-container>

              <li class="page-item" (click)="onPageIndexClicked(currentPageIndex + 1)">
                <a mat-stroked-button color="primary" class="ml-1 font-color-black" href="#"
                  onclick="return false">Next</a>
              </li>
            </ul>
          </div>
        </mat-tab>
      </ng-template>

      <ng-template [ngIf]="CancelledPo === 1">
        <mat-tab>
          <ng-template mat-tab-label>
            Cancelled PO

            &nbsp; <span class="badge badge-danger zerobadge{{ totalCancelledPoRowCount | number}}">{{
              totalCancelledPoRowCount }}</span>
          </ng-template>
          <!-- <app-projects-cancelled-po></app-projects-cancelled-po> -->
          <app-projects-cancelled-po [child_id]=ChildForm (uploaded)="ChildMethod($event)"></app-projects-cancelled-po>
        </mat-tab>
      </ng-template>
    </mat-tab-group>
  </div>
</div>




<!-- CREATE CHECKLIST -->
<form #editForm="ngForm" novalidate="novalidate" appClientLocationStatusValidator>
  <div class="modal" role="dialog" id="editModal" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="width: auto">
        <div class="modal-header bg-all">
          <div class="modal-title white-color">Receiving Checklist</div>
          <button type="button" class="close" data-dismiss="modal">
            <span>&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Raw Materials Information  -->
          <div class="partition-div">Raw Materials Information</div><br>
          <div class="col-lg-12">
            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" class="text-green" matInput id="txtEditProjectID" placeholder="Checklist ID"
                   
                  name="ProjectID" disabled="disabled" [(ngModel)]="editProject.projectID" required="required"
                    pattern="^[0-9]*$" appProjectIDUniqueValidator #editProjectID="ngModel" [ngClass]="{
                      'is-invalid':
                        editProjectID.invalid &&
                        (editProjectID.dirty ||
                          editProjectID.touched ||
                          newForm.submitted),
                      'is-valid':
                        editProjectID.valid &&
                        (editProjectID.dirty ||
                          editProjectID.touched ||
                          newForm.submitted)
                    }" />
                  <mat-label>Transaction ID</mat-label>
                  <mat-icon matPrefix>format_list_numbered</mat-icon>

                  <span class="text-danger" *ngIf="
                      editProjectID.invalid &&
                      (editProjectID.dirty ||
                        editProjectID.touched ||
                        editForm.submitted) &&
                      editProjectID.errors?.required
                    ">Project ID can't be blank</span>

                  <span class="text-danger" *ngIf="
                      editProjectID.invalid &&
                      (editProjectID.dirty ||
                        editProjectID.touched ||
                        editForm.submitted) &&
                      editProjectID.errors?.pattern
                    ">Project ID should contain numbers only</span>

                  <span class="text-danger" *ngIf="
                      editProjectID.invalid &&
                      (editProjectID.dirty ||
                        editProjectID.touched ||
                        editForm.submitted) &&
                      editProjectID.errors?.uniqueProjectID
                    ">Duplicate Project ID</span>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEdititem_code" placeholder="Item Code"
                    name="item_code" [(ngModel)]="editProject.item_code" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #edititem_code="ngModel" [ngClass]="{
                      'is-invalid':
                        edititem_code.invalid &&
                        (edititem_code.dirty ||
                          edititem_code.touched ||
                          editForm.submitted),
                      'is-valid':
                        edititem_code.valid &&
                        (edititem_code.dirty ||
                          edititem_code.touched ||
                          editForm.submitted)
                    }" disabled="disabled" />
                  <mat-label>Item Code</mat-label>
                  <span class="text-danger" *ngIf="
                      edititem_code.invalid &&
                      (edititem_code.dirty ||
                        edititem_code.touched ||
                        editForm.submitted) &&
                      edititem_code.errors?.required
                    ">Item Code can't be blank</span>

                  <span class="text-danger" *ngIf="
                      edititem_code.invalid &&
                      (edititem_code.dirty ||
                        edititem_code.touched ||
                        editForm.submitted) &&
                      edititem_code.errors?.pattern
                    ">Item Code can contain alphabets, digits, dot, hyphen or space
                    only</span>

                  <span class="text-danger" *ngIf="
                      edititem_code.invalid &&
                      (edititem_code.dirty ||
                        edititem_code.touched ||
                        editForm.submitted) &&
                      edititem_code.errors?.minlength
                    ">Item Code should be at least 3 characters long</span>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEdititem_class" placeholder="Item Class"
                    disabled="disabled" name="item_class" [(ngModel)]="editProject.item_class" minlength="3"
                    maxlength="30" #edititem_class="ngModel" />
                  <mat-label>Item Class</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditmajor_category" placeholder="Major Category"
                    disabled="disabled" name="major_category" [(ngModel)]="editProject.major_category" minlength="3"
                    maxlength="30" #editmajor_category="ngModel" />
                  <mat-label>Major Category</mat-label>
                </mat-form-field>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditReceivingDate"
                    value="{{ ToDay | date: 'M/d/y' }}" disabled="disabled" placeholder="Receiving Date" />
                  <mat-label>Receiving Date</mat-label>
                  <mat-icon matPrefix>calendar_today<span class="material-icons-outlined"> </span>
                  </mat-icon>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtitem_description" placeholder="Description"
                    name="item_descriptuion" [(ngModel)]="editProject.item_description" required="required"
                    minlength="3" maxlength="30" pattern="^[A-Za-z0-9 /-]*$" #edititem_description="ngModel" [ngClass]="{
                      'is-invalid':
                        edititem_description.invalid &&
                        (edititem_description.dirty ||
                          edititem_description.touched ||
                          editForm.submitted),
                      'is-valid':
                        edititem_description.valid &&
                        (edititem_description.dirty ||
                          edititem_description.touched ||
                          editForm.submitted)
                    }" disabled="disabled" #ItemDescription />
                  <mat-label>Item Description</mat-label>
                  <span class="text-danger" *ngIf="
                      edititem_description.invalid &&
                      (edititem_description.dirty ||
                        edititem_description.touched ||
                        editForm.submitted) &&
                      edititem_description.errors?.required
                    ">Item Description can't be blank</span>

                  <span class="text-danger" *ngIf="
                      edititem_description.invalid &&
                      (edititem_description.dirty ||
                        edititem_description.touched ||
                        editForm.submitted) &&
                      edititem_description.errors?.pattern
                    ">Item Description can contain alphabets, digits, dot, hyphen
                    or space only</span>

                  <span class="text-danger" *ngIf="
                      edititem_description.invalid &&
                      (edititem_description.dirty ||
                        edititem_description.touched ||
                        editForm.submitted) &&
                      edititem_description.errors?.minlength
                    ">Item Description should be at least 3 characters long</span>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEdititem_type" placeholder="Item Type"
                    disabled="disabled" name="item_type" [(ngModel)]="editProject.item_type" minlength="3"
                    maxlength="30" #edititem_type="ngModel" />
                  <mat-label>Item Type</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditsub_category" placeholder="Sub Category"
                    disabled="disabled" name="sub_category" [(ngModel)]="editProject.sub_category" minlength="3"
                    maxlength="30" #editsub_category="ngModel" />
                  <mat-label>Sub Category</mat-label>
                </mat-form-field>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field class="w-100" floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditSupplier" placeholder="supplier"
                    name="supplier" [(ngModel)]="editProject.supplier" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #editSupplier="ngModel" [ngClass]="{
                      'is-invalid':
                        editSupplier.invalid &&
                        (editSupplier.dirty ||
                          editSupplier.touched ||
                          editForm.submitted),
                      'is-valid':
                        editSupplier.valid &&
                        (editSupplier.dirty ||
                          editSupplier.touched ||
                          editForm.submitted)
                    }" disabled="disabled" />
                  <mat-label>Supplier</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field class="w-100" floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtUnitPrice" placeholder="Unit Price"
                    name="unit_price" [(ngModel)]="editProject.unit_price" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #editunit_price="ngModel" [ngClass]="{
                      'is-invalid':
                        editunit_price.invalid &&
                        (editunit_price.dirty ||
                          editunit_price.touched ||
                          editForm.submitted),
                      'is-valid':
                        editunit_price.valid &&
                        (editunit_price.dirty ||
                          editSupplier.touched ||
                          editForm.submitted)
                    }" disabled="disabled" />
                  <mat-label>Unit Price</mat-label>
                </mat-form-field>
              </div>
            </div>
          </div>

          <!-- Recieving Information -->
          <div class="partition-div">Recieving Information</div>
          <br>
          <div class="col-lg-12">
            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditpo_number" placeholder="PO Number"
                    name="po_number" [(ngModel)]="editProject.po_number" minlength="3" maxlength="30"
                    #editpo_number="ngModel" disabled="disabled" />
                  <mat-label>Po Number</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" class="text-green" id="txtEditpr_number"
                    placeholder="PR Number" name="pr_number" [(ngModel)]="editProject.pr_number" minlength="3"
                    maxlength="30" pattern="^[A-Za-z0-9 /-]*$" #editpr_number="ngModel" disabled="disabled" />
                  <mat-label>PR Number</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" class="text-green" id="txtqty_order"
                    placeholder="Quantity Ordered" name="qty_order" [(ngModel)]="editProject.qty_order" minlength="3"
                    maxlength="30" pattern="^[A-Za-z0-9 /-]*$" #editqty_order="ngModel" [ngClass]="{
                      'is-invalid':
                        editqty_order.invalid &&
                        (editqty_order.dirty ||
                          editqty_order.touched ||
                          editForm.submitted),
                      'is-valid':
                        editqty_order.valid &&
                        (editqty_order.dirty ||
                          editqty_order.touched ||
                          editForm.submitted)
                    }" disabled="disabled" #QtyOrdered />
                  <mat-label>Quantity Ordered</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" class="text-green" id="txtactual_remaining_receiving"
                    name="actual_remaining_receiving" [(ngModel)]="editProject.actual_remaining_receiving"
                    #editactual_remaining_receiving="ngModel" [ngClass]="{
                      'is-invalid':
                        editactual_remaining_receiving.invalid &&
                        (editactual_remaining_receiving.dirty ||
                          editactual_remaining_receiving.touched ||
                          editForm.submitted),
                      'is-valid':
                        editactual_remaining_receiving.valid &&
                        (editactual_remaining_receiving.dirty ||
                          editactual_remaining_receiving.touched ||
                          editForm.submitted)
                    }" disabled="disabled" #ActualRemainingReceiving />
                  <mat-label>Remaining Needed</mat-label>
                </mat-form-field>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditqty_uom" placeholder="Unit Of Measure"
                    name="qty_uom" [(ngModel)]="editProject.qty_uom" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #editqty_uom="ngModel" [ngClass]="{
                      'is-invalid':
                        editqty_uom.invalid &&
                        (editqty_uom.dirty ||
                          editqty_uom.touched ||
                          editForm.submitted),
                      'is-valid':
                        editqty_uom.valid &&
                        (editqty_uom.dirty ||
                          editqty_uom.touched ||
                          editForm.submitted)
                    }" disabled="disabled" />
                  <mat-label>Unit Of Measure</mat-label>
                  <span class="text-danger" *ngIf="
                      editqty_uom.invalid &&
                      (editqty_uom.dirty ||
                        editqty_uom.touched ||
                        editForm.submitted) &&
                      editqty_uom.errors?.required
                    ">UOM can't be blank</span>

                  <span class="text-danger" *ngIf="
                      editqty_uom.invalid &&
                      (editqty_uom.dirty ||
                        editqty_uom.touched ||
                        editForm.submitted) &&
                      editqty_uom.errors?.pattern
                    ">UOM can contain alphabets, digits, dot, hyphen or space
                    only</span>

                  <span class="text-danger" *ngIf="
                      editqty_uom.invalid &&
                      (editqty_uom.dirty ||
                        editqty_uom.touched ||
                        editForm.submitted) &&
                      editqty_uom.errors?.minlength
                    ">UOM should be at least 3 characters long</span>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtpo_date" placeholder="PO Date" name="po_date"
                    required="required" [(ngModel)]="editProject.po_date" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #editpo_date="ngModel" disabled="disabled" />
                  <mat-label>Po Date</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditipr_date" placeholder="PR Date"
                    name="pr_date" required="required" [(ngModel)]="editProject.pr_date" minlength="3" maxlength="30"
                    pattern="^[A-Za-z0-9 /-]*$" #editpr_date="ngModel" disabled="disabled" />
                  <mat-label>PR Date</mat-label>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="txtEditreceived_by_QA" #received_by
                    disabled="disabled" />
                  <mat-label>Assigned Person </mat-label>

                  <mat-icon matPrefix>person<span class="material-icons-outlined"> </span></mat-icon>
                </mat-form-field>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <mat-label>MFTG. Date *</mat-label>
                  <input type="text" matInput class="text-green" id="txtEditmfg_date" readonly
                    [matDatepicker]="dobDatepicker_mfg" [max]="maxDate" name="mfg_date"
                    [(ngModel)]="editProject.mfg_date" #editmfg_date="ngModel" [ngClass]="{
                      'is-invalid':
                        editmfg_date.invalid &&
                        (editmfg_date.dirty ||
                          editmfg_date.touched ||
                          editForm.submitted),
                      'is-valid':
                        editmfg_date.valid &&
                        (editmfg_date.dirty ||
                          editmfg_date.touched ||
                          editForm.submitted)
                    }" readonly="readonly" />

                  <mat-hint align="end">Product Mftg Date</mat-hint>

                  <mat-datepicker-toggle matSuffix [for]="dobDatepicker_mfg">
                    <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>

                  <mat-datepicker #dobDatepicker_mfg startView="month"></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <mat-label>Expiry Date *</mat-label>
                  <input type="text" matInput class="text-green" id="txtEditexpiration_date" readonly Placeholder="N/A"
                    [matDatepicker]="dobDatepicker" [min]="minDate" name="expiration_date"
                    [(ngModel)]="editProject.expiration_date" #editexpiration_date="ngModel" [ngClass]="{
                      'is-invalid':
                        editexpiration_date.invalid &&
                        (editexpiration_date.dirty ||
                          editexpiration_date.touched ||
                          editForm.submitted),
                      'is-valid':
                        editexpiration_date.valid &&
                        (editexpiration_date.dirty ||
                          editexpiration_date.touched ||
                          editForm.submitted)
                    }" (dateChange)="selectExpiryDate($event)" #ExpiryDateChild />

                  <mat-hint align="end" *ngFor="let nearlyexpiry of AllowableNearlyExpiryDays | async"
                    [value]="nearlyexpiry.p_nearly_expiry_desc">{{ nearlyexpiry.p_nearly_expiry_desc }} days allowable to
                    expire</mat-hint>

                  <mat-datepicker-toggle matSuffix [for]="dobDatepicker">
                    <mat-icon matDatepickerToggleIcon id="select_expiry">keyboard_arrow_down</mat-icon>
                  </mat-datepicker-toggle>

                  <mat-datepicker #dobDatepicker startView="month"></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" autocomplete="off" id="txtexpected_delivery"
                    placeholder="Expected Delivery" name="expected_delivery" required="required"
                    [(ngModel)]="editProject.expected_delivery" maxlength="9" #editexpected_delivery="ngModel"
                    [ngClass]="{
                      'is-invalid':
                        editexpected_delivery.invalid &&
                        (editexpected_delivery.dirty ||
                          editexpected_delivery.touched ||
                          editForm.submitted),
                      'is-valid':
                        editexpected_delivery.valid &&
                        (editexpected_delivery ||
                          editexpected_delivery.touched ||
                          editForm.submitted)
                    }" (keypress)="decimalFilter($event)" #ExpectedDeliveryActual
                    (keyup)="AllowablePercentageComputation($event)" c />
                  <mat-label>Expected Delivery</mat-label>
                  <span class="text-danger" *ngIf="
                      editexpected_delivery.invalid &&
                      (editexpected_delivery.dirty ||
                        editexpected_delivery.touched ||
                        editForm.submitted) &&
                      editexpected_delivery.errors?.pattern
                    ">Expected Delivery can contain alphabets, digits, dot, hyphen
                    or space only</span>

                  <span class="text-danger" *ngIf="
                      editexpected_delivery.invalid &&
                      (editexpected_delivery.dirty ||
                        editexpected_delivery.touched ||
                        editForm.submitted) &&
                      editexpected_delivery.errors?.minlength
                    ">Expected Delivery should be at least 3 characters long</span>
                </mat-form-field>
              </div>

              <div class="form-group col-md-3">
                <mat-form-field floatLabel="auto" appearance="outline" color="primary">
                  <input type="text" matInput class="text-green" id="actual_delivery_output"
                    placeholder="Quantity Actual Delivered" required="required" name="actual_delivery"
                    [(ngModel)]="editProject.actual_delivery" maxlength="9" #editactual_delivery="ngModel" [ngClass]="{
                      'is-invalid':
                        editactual_delivery.invalid &&
                        (editactual_delivery.dirty ||
                          editactual_delivery.touched ||
                          editForm.submitted),
                      'is-valid':
                        editactual_delivery.valid &&
                        (editactual_delivery.dirty ||
                          editactual_delivery.touched ||
                          editForm.submitted)
                    }" (keypress)="decimalFilter($event)" (keyup)="ActualDeliveryComputation($event)"
                    #ActualDeliveryChild autocomplete="off" />
                  <mat-label>QTY. Actual Delivered</mat-label>
                  <mat-hint align="end" *ngFor="let status of AllowablePercentages | async"
                    [value]="status.p_allowable_percentage">{{ status.p_allowable_percentage }} % Allowable</mat-hint>

                  <span class="text-danger" *ngIf="
                      editactual_delivery.invalid &&
                      (editactual_delivery.dirty ||
                        editactual_delivery.touched ||
                        editForm.submitted) &&
                      editactual_delivery.errors?.pattern
                    ">Qty Actual Delivery can contain alphabets, digits, dot,
                    hyphen or space only</span>

                  <span class="text-danger" *ngIf="
                      editactual_delivery.invalid &&
                      (editactual_delivery.dirty ||
                        editactual_delivery.touched ||
                        editForm.submitted) &&
                      editactual_delivery.errors?.minlength
                    ">Qty Actual Delivery should be at least 3 characters
                    long</span>
                </mat-form-field>
              </div>
            </div>


            <i class="hideObject">
              <b> Note :Active Allowable Percentage BUJE Singian</b>
              <p *ngFor="let status of AllowablePercentages | async" [value]="status.p_allowable_percentage">
                <input type="text" value="{{ status.p_allowable_percentage }}" #ActiveAllowablePercentage />
              </p>
              <br />
              <b>GrandTotal of Allowable Percentage Haha</b>
              <input type="text" id="Allowable_Percentage_id" #TotalAllowablePercentage />
              <br />
              <b>Note : Active Expiration Days Set Point Only</b>
              <p *ngFor="let nearlyexpiry of AllowableNearlyExpiryDays | async"
                [value]="nearlyexpiry.p_nearly_expiry_desc">
                <input type="text" value="{{ nearlyexpiry.p_nearly_expiry_desc }}" #ActiveNearlyExpirySetpoint />
              </p>
            </i>

            <div class="form-group row hideObject">
              <label for="txtEditDateOfStart" class="col-sm-4 col-form-label">Date of Start exx</label>
              <div class="col-sm-8">
                <input type="date" id="txtEditDateOfStart" style="width: 180px" class="form-control"
                  placeholder="Date of Start" name="DateOfStart" [(ngModel)]="editProject.dateOfStart"
                  required="required" #editDateOfStart="ngModel" [ngClass]="{
                    'is-invalid':
                      editDateOfStart.invalid &&
                      (editDateOfStart.dirty ||
                        editDateOfStart.touched ||
                        editForm.submitted),
                    'is-valid':
                      editDateOfStart.valid &&
                      (editDateOfStart.dirty ||
                        editDateOfStart.touched ||
                        editForm.submitted)
                  }" />

                <span class="text-danger" *ngIf="
                    editDateOfStart.invalid &&
                    editForm.submitted &&
                    editDateOfStart.errors?.required
                  ">Date of Start can't be blank</span>
              </div>
            </div>

            <div class="form-group row hideObject">
              <label class="col-sm-4">&nbsp;</label>
              <div class="col-sm-8">
                <div class="form-check">
                  <input type="checkbox" id="chkEditActive" value="true" class="form-check-input"
                    [(ngModel)]="editProject.active" name="active" />
                  <label class="form-check-label" for="chkEditActive">Active</label>
                </div>
              </div>
            </div>






          </div>

          <!-- Reject Information  -->
          <div class="partition-div">Reject Information</div>
          <div class="rejection-buttons">
            <button class="btn-add btn btn-danger btn-sm mr-3" (click)="onAddAdditionalRejectRow($event)">
              Add
            </button>
            <button class="btn btn-info btn-sm" id="remove-remarks-button"
              (click)="onRemoveAdditionalRejectRow($event)">
              Undo
            </button>
          </div>
          <div class="flex">
            <div class="box-1">
              <!-- Start of Validation Sample using animal -->

              <div class="form-group row" id="rejectionrow1">
                <!-- <label for="drpEditClientLocationsOne" class="col-sm-4 col-form-label">Reject Status 1</label> -->
                <div class="col-sm-8">
                  <mat-form-field appearance="fill">
                    <mat-label>Rejected Status</mat-label>
                    <mat-select (selectionChange)="validateRejectedStatus($event)"
                      [(ngModel)]="editProject.status_of_reject_one" name="status_of_reject_one"
                      id="drpEditRejectStatusOne">
                      <mat-option *ngFor="let status of RejectStatuses | async" [value]="status.reject_status_name"
                        #RejectedStatus1>
                        {{ status.reject_status_name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="rejectionrow2">
                <div class="col-sm-8">
                  <mat-form-field appearance="fill">
                    <mat-label>Rejected Status</mat-label>
                    <mat-select [(ngModel)]="editProject.status_of_reject_two" name="status_of_reject_two"
                      id="drpEditRejectStatusTwo" #RejectedStatus2 (selectionChange)="validateRejectedStatus($event)">
                      <mat-option *ngFor="let status of RejectStatuses | async" [value]="status.reject_status_name">
                        {{ status.reject_status_name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="rejectionrow32" #rejectedStatusElementNo3>
                <div class="col-sm-8">
                  <mat-form-field appearance="fill">
                    <mat-label>Rejected Status</mat-label>
                    <mat-select [(ngModel)]="editProject.status_of_reject_three" name="status_of_reject_three"
                      id="drpEditRejectStatusThree" (selectionChange)="validateRejectedStatus($event)">
                      <mat-option *ngFor="let status of RejectStatuses | async" [value]="status.reject_status_name"
                        #RejectedStatus3>
                        {{ status.reject_status_name }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="total-reject">
                <div class="col-sm-8">
                  <mat-form-field floatLabel="auto" appearance="standard" color="primary">
                    <input type="text" matInput name="total_of_reject_mat" [(ngModel)]="editProject.total_of_reject_mat"
                      #totalofReject readonly="readonly" />
                    <mat-label>Total No. of Reject</mat-label>
                    <mat-hint align="end">Grand Total</mat-hint>
                  </mat-form-field>
                </div>
              </div>
              <!-- End of the Statement -->
            </div>

            <div class="box-2">
              <div class="form-group row" id="rejectionrow12">
                <div class="col-sm-8">
                  <mat-form-field floatLabel="auto" appearance="standard" color="primary">
                    <input type="text" name="count_of_reject_one" matInput #rejectNo1
                      (keyup)="onChangeEventReject1($event)" [(ngModel)]="editProject.count_of_reject_one" maxlength="9"
                      #editcount_of_reject_one="ngModel" [ngClass]="{
                        'is-invalid':
                          editcount_of_reject_one.invalid &&
                          (editcount_of_reject_one.dirty ||
                            editcount_of_reject_one.touched ||
                            editForm.submitted),
                        'is-valid':
                          editcount_of_reject_one.valid &&
                          (editcount_of_reject_one.dirty ||
                            editcount_of_reject_one.touched ||
                            editForm.submitted)
                      }" id="rejectRow1" (keypress)="validateNumber($event)" />
                    <mat-label>No.of Reject </mat-label>
                    <span class="text-danger" *ngIf="
                        editcount_of_reject_one.invalid &&
                        (editcount_of_reject_one.dirty ||
                          editcount_of_reject_one.touched ||
                          editForm.submitted) &&
                        editcount_of_reject_one.errors?.required
                      ">Number of Rejection can't be blank</span>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="rejectionrow22">
                <div class="col-sm-8">
                  <mat-form-field floatLabel="auto" appearance="standard" color="primary">
                    <input type="text" name="count_of_reject_two" matInput #rejectNo2
                      (keyup)="onChangeEventReject2($event)" [(ngModel)]="editProject.count_of_reject_two" maxlength="9"
                      #editcount_of_reject_two="ngModel" [ngClass]="{
                        'is-invalid':
                          editcount_of_reject_two.invalid &&
                          (editcount_of_reject_two.dirty ||
                            editcount_of_reject_two.touched ||
                            editForm.submitted),
                        'is-valid':
                          editcount_of_reject_two.valid &&
                          (editcount_of_reject_two.dirty ||
                            editcount_of_reject_two.touched ||
                            editForm.submitted)
                      }" id="rejectRow2" (keypress)="validateNumber($event)" />
                    <mat-label>No.of Reject</mat-label>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="rejectionrow3">
                <div class="col-sm-8">
                  <mat-form-field floatLabel="auto" appearance="standard" color="primary">
                    <input type="text" name="count_of_reject_three" matInput #rejectNo3
                      (keyup)="onChangeEventReject3($event)" [(ngModel)]="editProject.count_of_reject_three"
                      maxlength="9" #editcount_of_reject_three="ngModel" [ngClass]="{
                        'is-invalid':
                          editcount_of_reject_three.invalid &&
                          (editcount_of_reject_three.dirty ||
                            editcount_of_reject_three.touched ||
                            editForm.submitted),
                        'is-valid':
                          editcount_of_reject_three.valid &&
                          (editcount_of_reject_three.dirty ||
                            editcount_of_reject_three.touched ||
                            editForm.submitted)
                      }" id="rejectRow3" (keypress)="validateNumber($event)" />
                    <mat-label>No.of Reject</mat-label>
                  </mat-form-field>
                </div>
              </div>

              <div class="form-group row" id="total-confirm-reject">
                <div class="col-sm-8">
                  <mat-form-field floatLabel="auto" appearance="standard" color="primary">
                    <input type="text" matInput name="total_of_reject_mat" [(ngModel)]="editProject.total_of_reject_mat"
                      #confirmReject (keyup)="ConfirmNoofReject($event)" (keypress)="validateNumber($event)" />
                    <mat-label>Confirm No. of Reject</mat-label>
                    <mat-hint align="end">Confirmation</mat-hint>
                    <!-- <mat-icon matPrefix>list<span class="material-icons-outlined">
                </span></mat-icon> -->
                    <span class="text-danger rejectIsnotMactchSpanTagclass" #rejectIsnotMactchSpanTag></span>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <br>


          <!-- New set of checklist -->
          <!-- <button (click)="mapArrayData(editProject.projectID)">Show</button> -->
          <div class="partition-div">Check List Information</div><br>
          <div class="col-lg-12">
            <div class="accordion" id="accordionExample" *ngFor="let parent of qcchecklist; let i = index">
              <div class="card">
                <div class="card-header" id="headingOne">
                  <h3 class="mb-0">
                    <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                      [attr.data-target]="'#collapseOne'+ i" aria-expanded="true"
                      [attr.aria-controls]="'collapseOne' + i">
                      <span class="checklist-text-color">{{ i + 1 + ". " + parent.parent_chck_details }}
                      </span>
                    </button>
                  </h3>
                </div>

                <div [attr.id]="'collapseOne' + i" class="collapse show" aria-labelledby=""
                  data-parent="#accordionExample">
                  <div class="card-body" *ngFor="let child of parent.childCheckLists">
                    <div class="flex tbl-text">
                      <table class="table">
                        <thead>
                          <tr>
                            <th class="th-color" style="width: 60% ;">{{child.cc_description}}
                            </th>
                            <th class="th-color" style="width: 40% ;">Parameter</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let grandchild of child.grandChildCheckLists; let grandchildIndex = index;">
                            <td>{{grandchild.gc_description}}
                            </td>
                            <td>
                              <div class="form-group col-md-12"
                                *ngFor="let param of grandchild.checkListParameters; let grandchildParam = index;">

                                <ng-container *ngIf="grandchild.is_manual === 'manual'">
                                  <div class="form-group col-md-12 manual-text">
                                    <textarea type="text" class="form-control" [(ngModel)]="param.manual_description"
                                      name="{{param.cp_params_id}}"></textarea>
                                  </div>
                                </ng-container>

                                <ng-container *ngIf="grandchild.is_manual === 'yes'">
                                  <div class="form-group col-md-12">
                                    <div class="chx-main">
                                      <div class="chk-element">
                                        <input type="checkbox" class="form-check-input" [value]="true"
                                          name="{{param.cp_params_id}}" [(ngModel)]="param.cp_status"
                                          [ngModelOptions]="{standalone: true}">
                                        <label for="">{{ param.cp_description }}</label>
                                      </div>
                                    </div>
                                  </div>
                                </ng-container>

                                <ng-container *ngIf="grandchild.is_manual === 'no'">
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" [value]="true"
                                      name="{{param.cp_params_id}}" [(ngModel)]="param.cp_status"
                                      [ngModelOptions]="{standalone: true}">
                                    <label class="form-check-label" for="inlineRadio1">Yes</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" [value]="false"
                                      [(ngModel)]="param.cp_status" name="{{param.cp_params_id}}">
                                    <label class="form-check-label" for="inlineRadio2">No</label>
                                  </div>
                                </ng-container>

                                <ng-container *ngIf="grandchild.is_manual === 'default' ">
                                  <div class="form-group col-md-12">
                                    {{param.cp_description}}
                                  </div>
                                </ng-container>

                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <br>
          <br>
          <br>

        </div>

        <!-- Footer -->
        <div class="modal-footer">
          <button mat-stroked-button [disabled]="!editForm.valid" color="primary" class="mr-2"
            (click)="onRecieveButtonClick(editProject.projectID)">
            Receive
          </button>
          <button [hidden]="true" mat-stroked-button color="warn" data-dismiss="modal" id="editFormCancel">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

</form>

<!-- Delete -->
<form>
  <div class="modal" role="dialog" id="deleteModal">
    <div class="modal-dialog">
      <div class="modal-content" style="width: auto">
        <div class="modal-header bg-all">
          <div class="modal-title white-color">Delete PO Summary</div>
          <button type="button" class="close" data-dismiss="modal">
            <span>&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- <div class="text-danger"><h3><u>Raw Material Details</u></h3></div> -->

          <mat-form-field class="w-100" floatLabel="auto" appearance="standard" color="primary">
            <input type="text" matInput id="txtDeleteProjectID" placeholder="Project ID" name="ProjectID"
              [(ngModel)]="deleteProject.projectID" disabled="disabled" />
            <mat-label>Transaction ID</mat-label>
            <mat-hint align="end">Main id of the Transaction</mat-hint>
            <mat-icon matPrefix>format_list_numbered<span class="material-icons-outlined">
              </span>
            </mat-icon>
          </mat-form-field>

          <mat-form-field class="w-100" floatLabel="auto" appearance="standard" color="primary">
            <input type="text" matInput id="txtDeleteProjectName" placeholder="Description" name="item_description"
              [(ngModel)]="deleteProject.item_description" disabled="disabled" />
            <mat-label>Item Description</mat-label>
            <mat-hint align="end">The subject of the transaction</mat-hint>
            <mat-icon matPrefix>info<span class="material-icons-outlined"> </span>
            </mat-icon>
          </mat-form-field>
        </div>
        <div class="modal-footer">
          <button mat-stroked-button color="accent" data-dismiss="modal" class="mr-2">
            Cancel<mat-icon>keyboard_return </mat-icon>
          </button>
          <button mat-stroked-button color="warn" data-dismiss="modal" (click)="onDeleteConfirmClick()">
            Delete<mat-icon> delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</form>

<!-- Cancelled PO -->
<form>
  <div class="modal" role="dialog" id="CancelledTransactionModal">
    <div class="modal-dialog">
      <div class="modal-content" style="width: auto">
        <div class="modal-header bg-all">
          <div class="modal-title white-color">Cancel PO QC Receiving</div>
          <button type="button" class="close" data-dismiss="modal">
            <span>&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- <div class="text-danger"><h3><u>Raw Material Details</u></h3></div> -->

          <mat-form-field class="w-100" floatLabel="auto" appearance="standard" color="primary">
            <input type="text" matInput id="txtDeleteProjectID" placeholder="Project ID" name="ProjectID"
              [(ngModel)]="editProject.po_number" disabled="disabled" #PONumber />
            <mat-label>PO Number</mat-label>
            <!-- <mat-hint align="end">Purchased Order</mat-hint> -->
            <!-- <mat-icon matPrefix>inventory<span class="material-icons-outlined">
          </span>
          </mat-icon> -->
          </mat-form-field>

          <mat-form-field class="w-100" floatLabel="auto" appearance="standard" color="primary">
            <input type="text" matInput id="txtDeleteProjectName" placeholder="Description" name="item_description"
              [(ngModel)]="editProject.item_description" disabled="disabled" />
            <mat-label>Item Description</mat-label>
            <!-- <mat-hint align="end">The subject of the transaction</mat-hint> -->
            <mat-icon matPrefix>info<span class="material-icons-outlined"> </span>
            </mat-icon>
          </mat-form-field>
          <br />
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Reason</mat-label>
            <mat-select [(ngModel)]="editProject.cancelled_reason" name="cancelled_reason" required>
              <mat-option *ngFor="let status of CancelPoSummary | async" [value]="status.status_name">
                {{ status.status_name }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <p *ngFor="let status of ProjectsAllowableQty | async" [value]="status.actual_delivery">
            <emp class="system-name">List of Item for Receiving {{ totalPartialReceivingCancel }}</emp>
            <mat-form-field class="w-100" floatLabel="auto" appearance="standard" color="primary">
              <input type="text" matInput value="{{ status.actual_delivery }}" id="ActivePartialReceiving"
                #ActivePartialReceiving disabled="disabled" />

              <mat-label>Item Quantity</mat-label>
              <mat-hint align="end">Receiving Transaction</mat-hint>
              <mat-icon matPrefix>shopping_cart<span class="material-icons-outlined"> </span>
              </mat-icon>
            </mat-form-field>
          </p>
        </div>



        <div class="modal-footer">
          <!-- <button mat-stroked-button color="accent" data-dismiss="modal" class="mr-2">Cancel<mat-icon>free_cancellation</mat-icon></button> -->
          <button mat-stroked-button color="warn" class="{{ PartialComment }}" data-dismiss="modal"
            [disabled]="!editProject.cancelled_reason" (click)="CancelledPoDetails()">
            Submit
          </button>

        </div>
      </div>
    </div>


  </div>
</form>
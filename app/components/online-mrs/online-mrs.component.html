<div class="row">
  <div class="col-xl-12 col-lg-9 mx-auto divForModuleTable">
    <nav aria-label="breadcrumb textStyle">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a [routerLink]="['/admin', 'dashboard']">
            <p class="dashboardStyle">
              <i class="fa fa-home" aria-hidden="true"></i> Dashboard
            </p>
          </a>
        </li>
        <li class="breadcrumb-item dashboardActive" aria-current="page">
          Online MRS
        </li>
      </ol>
    </nav>

    <mat-tab-group mat-align-tabs="start">
      <ng-template [ngIf]="OrderList === 1">
        <mat-tab>
          <ng-template mat-tab-label>
            Order List
            &nbsp; <span *ngIf="requestOrderCount" class="badge badge-danger zerobadge{{ requestOrderCount }}">{{
              requestOrderCount }}</span>
          </ng-template>

          <div class="col-sm-12" style="padding-top: 2em">
            <div class="d-flex">
              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-filter"></span></span>
                  </div>
                  <select class="form-control" id="drpSearchBy" name="SearchBy"
                    (change)="onFilterCategory($event.target.value)">
                    <option value="">All</option>
                    <!-- <option value="DRY">DRY</option>
                  <option value="FRESH">FRESH</option> -->
                  </select>
                </div>
              </div>

              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-search"></span></span>
                  </div>
                  <input type="search" class="form-control" placeholder="Find here...." id="txtSearchText"
                    autocomplete="off" name="SearchText" [(ngModel)]="searchText" (keyup)="onSearchTextKeyup($event)" />
                </div>
              </div>
              <div class="ml-auto p-2">
                <button class="addbtnStyle" data-toggle="modal" data-target="#requestOrder"
                  (click)="requestOrderClick()" data-backdrop="false" data-keyboard="false"><span class="fa fa-plus">
                  </span> Add Order</button>
              </div>
            </div>
          </div>

          <div class="col-lg-12">
            <div class="d-flex">
              <div class="col-xl-12 col-lg-9 mx-auto scrollableTableMain tbl-text">
                <table class="" style="width: 100%" class="text-center">
                  <thead>
                    <tr class="text-light header-bg-color-um system-name">
                      <th>No.</th>
                      <th style="width: 30%;">Description</th>
                      <th>Requested By</th>
                      <th>Requested Date</th>
                      <th>Date Needed</th>
                      <th>Total Item/s</th>
                      <th style="width: 20%;" class="text-center">Actions</th>
                    </tr>
                  </thead>
                  <tr
                    *ngFor="let item of parentData | filter: searchBy : searchText | sort : sortBy : sortOrder | paging : currentPageIndex : pageSize; let i = index">
                    <td>{{item.mrs_id}}</td>
                    <td>{{item.mrs_req_desc}}

                      <ng-container *ngIf="Role === 'Admin' || approverRole === false || requestorFound === 1 ">
                        <button mat-stroked-button class="editbtnStyle display-none" id="EditDescriptionClick"
                          data-toggle="modal" data-target="#editParent" data-backdrop="false" data-keyboard="false"
                          (click)="clickUpdate(item)"><span class="fa fa-pencil"> </span></button>
                      </ng-container>

                    </td>
                    <td>{{item.mrs_requested_by}}</td>
                    <td>{{item.mrs_requested_date | date:'MM-dd-yyyy'}}</td>
                    <td>{{item.mrs_date_needed | date:'MM-dd-yyyy'}}</td>
                    <td>{{item.total_request_count}}</td>
                    <td>
                      <button mat-stroked-button class="editbtnStyle" color="primary" cancelOrderClick
                        data-toggle="modal" data-target="#viewOrder" data-backdrop="false" data-keyboard="false"
                        title="View Details" (click)="viewOrderClickParent(item)"> <span class="fa fa-eye"></span>
                        View</button>



                      <ng-container *ngIf="Role === 'Admin' || approverRole === true ">
                        <button mat-stroked-button class="editbtnStyle" data-toggle="modal" data-target="#approveModal"
                          data-backdrop="false" data-keyboard="false" (click)="approvedOrderRequestSubmit(item)">
                          <span class="fa fa-check-circle"></span> Approve
                        </button>
                      </ng-container>

                      <button mat-stroked-button class="editbtnStyle" color="warn" data-toggle="modal"
                        data-target="#cancelOrderModal" data-backdrop="false" data-keyboard="false"
                        (click)="cancelOrderClick(item)"><span class="fa fa-ban"> </span> Cancel</button>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div class="col-12">
            <ul class="pagination justify-content-center mt-1">
              <li class="page-item" (click)="onPageIndexClicked(currentPageIndex - 1)">
                <a mat-stroked-button color="primary" class="mr-1 font-color-black" href="#"
                  onclick="return false">Prev</a>
              </li>

              <ng-container *ngIf="pages.length <= 10">
                <li class="page-item" *ngFor="let page of pages"
                  [ngClass]="{ 'link-active-paging': page.pageIndex == currentPageIndex}"
                  (click)="onPageIndexClicked(page.pageIndex)">
                  <a class="page-link" href="#" onclick="return false">{{page.pageIndex + 1}}</a>
                </li>
              </ng-container>

              <ng-container *ngIf="pages.length > 10">
                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == 0}"
                  (click)="onPageIndexClicked(0)">
                  <a class="page-link" href="#" onclick="return false">1</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == 1}"
                  (click)="onPageIndexClicked(1)">
                  <a class="page-link" href="#" onclick="return false">2</a>
                </li>

                <li *ngIf="currentPageIndex > 1 && currentPageIndex < pages.length - 2">&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]=" 'link-active-paging' " (click)="onPageIndexClicked(currentPageIndex)"
                  *ngIf="currentPageIndex > 1 && currentPageIndex < pages.length - 2">
                  <a class="page-link" href="#" onclick="return false">{{currentPageIndex + 1}}</a>
                </li>

                <li>&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == pages.length - 2}"
                  (click)="onPageIndexClicked(pages.length - 2)">
                  <a class="page-link" href="#" onclick="return false">{{pages.length - 1}}</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndex == pages.length - 1}"
                  (click)="onPageIndexClicked(pages.length - 1)">
                  <a class="page-link" href="#" onclick="return false">{{pages.length}}</a>
                </li>
              </ng-container>

              <li class="page-item" (click)="onPageIndexClicked(currentPageIndex + 1)">
                <a mat-stroked-button color="primary" class="ml-1 font-color-black" href="#"
                  onclick="return false">Next</a>
              </li>
            </ul>
          </div>
        </mat-tab>
      </ng-template>
      <ng-template [ngIf]="ApprovedOrders === 1">
        <mat-tab>
          <ng-template mat-tab-label>
            Approved Orders
            &nbsp; <span *ngIf="approvedOrderListCount"
              class="badge badge-danger zerobadge{{ approvedOrderListCount }}">{{ approvedOrderListCount }}</span>
          </ng-template>

          <div class="col-sm-12" style="padding-top: 2em">
            <div class="d-flex">
              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-filter"></span></span>
                  </div>
                  <select class="form-control" id="drpSearchBy" name="SearchBy"
                    (change)="onFilterCategory($event.target.value)">
                    <option value="">All</option>
                    <!-- <option value="DRY">DRY</option>
                  <option value="FRESH">FRESH</option> -->
                  </select>
                </div>
              </div>

              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-search"></span></span>
                  </div>
                  <input type="search" class="form-control" placeholder="Find here...." id="txtSearchText"
                    name="SearchText" autocomplete="off" [(ngModel)]="searchText"
                    (keyup)="onSearchTextKeyupApproved($event)" />
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-12">
            <div class="d-flex">
              <div class="col-xl-12 col-lg-9 mx-auto scrollableTableMain tbl-text">
                <table class="" style="width: 100%" class="text-center">
                  <thead>
                    <tr class="text-light header-bg-color-um system-name">
                      <th>No.</th>
                      <th style="width: 30%;">Description</th>
                      <th>Requested By</th>
                      <th>Requested Date</th>
                      <th>Date Needed</th>
                      <th>Total Item/s</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tr
                    *ngFor="let item of approvedOrderList | filter: searchBy : searchText | sort : sortBy : sortOrder | paging : currentPageIndexApproved : pageSize; let i = index">
                    <td>{{item.mrs_id}}</td>
                    <td>{{item.mrs_req_desc}}</td>
                    <td>{{item.mrs_requested_by}}</td>
                    <td>{{item.mrs_requested_date | date:'MM-dd-yyyy'}}</td>
                    <td>{{item.mrs_date_needed | date:'MM-dd-yyyy'}}</td>
                    <td>{{item.total_request_count}}</td>
                    <td>
                      <button mat-stroked-button class="editbtnStyle" color="primary" cancelOrderClick
                        data-toggle="modal" data-target="#viewOrder" data-backdrop="false" data-keyboard="false"
                        title="View Details" (click)="viewOrderClickApproved(item)"> <span class="fa fa-eye"></span>
                        View</button>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div class="col-12">
            <ul class="pagination justify-content-center mt-1">
              <li class="page-item" (click)="onPageIndexClickedApproved(currentPageIndexApproved - 1)">
                <a mat-stroked-button color="primary" class="mr-1 font-color-black" href="#"
                  onclick="return false">Prev</a>
              </li>

              <ng-container *ngIf="pagesApproved.length <= 10">
                <li class="page-item" *ngFor="let page of pagesApproved"
                  [ngClass]="{ 'link-active-paging': page.pageIndex == currentPageIndexApproved}"
                  (click)="onPageIndexClickedApproved(page.pageIndex)">
                  <a class="page-link" href="#" onclick="return false">{{page.pageIndex + 1}}</a>
                </li>
              </ng-container>

              <ng-container *ngIf="pages.length > 10">
                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexApproved == 0}"
                  (click)="onPageIndexClickedApproved(0)">
                  <a class="page-link" href="#" onclick="return false">1</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexApproved == 1}"
                  (click)="onPageIndexClickedApproved(1)">
                  <a class="page-link" href="#" onclick="return false">2</a>
                </li>

                <li *ngIf="currentPageIndexApproved > 1 && currentPageIndexApproved < pagesApproved.length - 2">&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]=" 'link-active-paging' " (click)="onPageIndexClickedApproved(currentPageIndexApproved)"
                  *ngIf="currentPageIndexApproved > 1 && currentPageIndexApproved < pagesApproved.length - 2">
                  <a class="page-link" href="#" onclick="return false">{{currentPageIndexApproved + 1}}</a>
                </li>

                <li>&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexApproved == pagesApproved.length - 2}"
                  (click)="onPageIndexClickedApproved(pagesApproved.length - 2)">
                  <a class="page-link" href="#" onclick="return false">{{pagesApproved.length - 1}}</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexApproved == pagesApproved.length - 1}"
                  (click)="onPageIndexClickedApproved(pagesApproved.length - 1)">
                  <a class="page-link" href="#" onclick="return false">{{pagesApproved.length}}</a>
                </li>
              </ng-container>

              <li class="page-item" (click)="onPageIndexClickedApproved(currentPageIndexApproved + 1)">
                <a mat-stroked-button color="primary" class="ml-1 font-color-black" href="#"
                  onclick="return false">Next</a>
              </li>
            </ul>
          </div>
        </mat-tab>
      </ng-template>
      
      <ng-template [ngIf]="CancelledOrders === 1">
        <mat-tab>
          <ng-template mat-tab-label>
            Cancelled Orders
            &nbsp; <span *ngIf="cancelledOrderCount" class="badge badge-danger zerobadge{{ cancelledOrderCount }}">{{
              cancelledOrderCount }}</span>
          </ng-template>

          <div class="col-sm-12" style="padding-top: 2em">
            <div class="d-flex">
              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-filter"></span></span>
                  </div>
                  <select class="form-control" id="drpSearchBy" name="SearchBy"
                    (change)="onFilterCategory($event.target.value)">
                    <option value="">All</option>
                    <!-- <option value="DRY">DRY</option>
                  <option value="FRESH">FRESH</option> -->
                  </select>
                </div>
              </div>

              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-search"></span></span>
                  </div>
                  <input type="search" class="form-control" placeholder="Find here...." id="txtSearchText"
                    autocomplete="off" name="SearchText" [(ngModel)]="searchText"
                    (keyup)="onSearchTextKeyupCancelled($event)" />
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-12">
            <div class="d-flex">
              <div class="col-xl-12 col-lg-9 mx-auto scrollableTableMain tbl-text">
                <!-- table table-striped table-bordered nowrap table-responsive-sm -->
                <table class="" style="width: 100%" class="text-center">
                  <thead>
                    <tr class="text-light header-bg-color-um system-name">
                      <th>No.</th>
                      <th style="width: 30%;">Description</th>
                      <th>Requested By</th>
                      <th>Requested Date</th>
                      <th>Cancelled By</th>
                      <th>Cancelled Date</th>
                      <th>Reason</th>
                      <th>Total Item/s</th>
                      <th style="width: 20%;" class="text-center">Actions</th>
                    </tr>
                  </thead>
                  <tr
                    *ngFor="let item of cancelledOrderList | filter: searchBy : searchText | sort : sortBy : sortOrder | paging : currentPageIndexCancelled : pageSize; let i = index">
                    <td>{{item.mrs_id}}</td>
                    <td>{{item.mrs_req_desc}}</td>
                    <td>{{item.mrs_requested_by}}</td>
                    <td>{{item.mrs_requested_date | date:'MM-dd-yyyy'}}</td>
                    <td>{{item.is_cancel_by}}</td>
                    <td>{{item.is_cancel_date | date:'MM-dd-yyyy'}}</td>
                    <td>
                      <button mat-stroked-button class="editbtnStyle" color="primary" data-toggle="modal"
                        data-target="#viewCancelReason" data-backdrop="false" data-keyboard="false" title="View Details"
                        (click)="viewReasonForCancelClick(item)"> <span class="fa fa-list-alt"></span> Reason</button>
                    </td>
                    <td>{{item.total_request_count}}</td>
                    <td>
                      <button mat-stroked-button class="editbtnStyle" color="primary" data-toggle="modal"
                        data-target="#viewOrder" data-backdrop="false" data-keyboard="false" title="View Details"
                        (click)="viewOrderClickCancelled(item)"> <span class="fa fa-eye"></span> View</button>

                      <ng-container *ngIf="Role === 'Admin' || approverRole === true ">
                        <button mat-stroked-button class="editbtnStyle" data-toggle="modal"
                          data-target="#ReturnOrderRequest" data-backdrop="false" data-keyboard="false"
                          (click)="clickReturnOrderRequest(item)"><span class="fa fa-backward"> </span> Return</button>
                      </ng-container>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>

          <div class="col-12">
            <ul class="pagination justify-content-center mt-1">
              <li class="page-item" (click)="onPageIndexClickedCancelled(currentPageIndexCancelled - 1)">
                <a mat-stroked-button color="primary" class="mr-1 font-color-black" href="#"
                  onclick="return false">Prev</a>
              </li>

              <ng-container *ngIf="pages.length <= 10">
                <li class="page-item" *ngFor="let page of pagesCancelled"
                  [ngClass]="{ 'link-active-paging': page.pageIndex == currentPageIndexCancelled}"
                  (click)="onPageIndexClickedCancelled(page.pageIndex)">
                  <a class="page-link" href="#" onclick="return false">{{page.pageIndex + 1}}</a>
                </li>
              </ng-container>

              <ng-container *ngIf="pagesCancelled.length > 10">
                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexCancelled == 0}"
                  (click)="onPageIndexClickedCancelled(0)">
                  <a class="page-link" href="#" onclick="return false">1</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexCancelled == 1}"
                  (click)="onPageIndexClickedCancelled(1)">
                  <a class="page-link" href="#" onclick="return false">2</a>
                </li>

                <li *ngIf="currentPageIndexCancelled > 1 && currentPageIndexCancelled < pagesCancelled.length - 2">&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]=" 'link-active-paging' " (click)="onPageIndexClickedCancelled(currentPageIndexCancelled)"
                  *ngIf="currentPageIndexCancelled > 1 && currentPageIndexCancelled < pagesCancelled.length - 2">
                  <a class="page-link" href="#" onclick="return false">{{currentPageIndexCancelled + 1}}</a>
                </li>

                <li>&nbsp;...&nbsp;</li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexCancelled == pagesCancelled.length - 2}"
                  (click)="onPageIndexClickedCancelled(pagesCancelled.length - 2)">
                  <a class="page-link" href="#" onclick="return false">{{pagesCancelled.length - 1}}</a>
                </li>

                <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexCancelled == pagesCancelled.length - 1}"
                  (click)="onPageIndexClickedCancelled(pagesCancelled.length - 1)">
                  <a class="page-link" href="#" onclick="return false">{{pagesCancelled.length}}</a>
                </li>
              </ng-container>

              <li class="page-item" (click)="onPageIndexClickedCancelled(currentPageIndexCancelled + 1)">
                <a mat-stroked-button color="primary" class="ml-1 font-color-black" href="#"
                  onclick="return false">Next</a>
              </li>
            </ul>
          </div>
        </mat-tab>
      </ng-template>
    </mat-tab-group>
  </div>
</div>



<div class="modal" role="dialog" id="requestOrder">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Request Order Form</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="order-description" [formGroup]="requestOrderDescForm">
          <div class="form-row">
            <div class="form-group col-md-3">
              <label for="inputEmail4">Date Needed:</label>
              <input type="date" min="{{ toDaysDate | date: 'yyyy-MM-dd' }}" class="form-control required-text"
                formControlName="mrs_date_needed">
            </div>
            <input type="text" class="form-control" [hidden]="true" formControlName="user_id">

            <div class="form-group col-md-6">
            </div>

            <div class="form-group col-md-3">
              <label for="inputEmail4">Select Warehouse:</label>
              <select class="form-control" [disabled]="true">
                <option value="">DRY</option>
                <option value="">FRESH</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputEmail4">Description:</label>
              <input type="text" class="form-control required-text" formControlName="mrs_req_desc">
            </div>

            <div class="form-group col-md-3">
              <label for="inputEmail4">Requested By:</label>
              <input type="text" class="form-control disable-text" readonly formControlName="mrs_requested_by">
            </div>

            <div class="form-group col-md-3">
              <label for="inputEmail4">Requested Date:</label>
              <input type="text" class="form-control disable-text" formControlName="requested_date" readonly>
            </div>
          </div>

          <div class="form-row">
            <input type="text" class="form-control" formControlName="department_id" readonly [hidden]="true">
          </div>
        </div>

        <div class="partition-div">Search Item/s To Order</div><br>

        <div class="search-item" [formGroup]="itemReqForm">
          <div class="form-row">
            <div class="form-group col-md-4">
              <div class="input-group searchBtnStyle">
                <input type="text" id="txtSearchTextID" class="form-control text-required-color" placeholder="Item code"
                  [(ngModel)]="mrs_item_code" [ngModelOptions]="{standalone: true}" />
                <div class="input-group-append ">
                  <button (click)="onSearchItemCode()" [disabled]="!requestOrderDescForm.valid" class="btn-search"
                    type="button"><span class="fa fa-search"></span> Search</button>

                  <button mat-stroked-button color="primary" id="showRawMatsModal"
                    class="editbtnStyle visibility-hidden" data-toggle="modal" data-target="#editModalModuleTagging"
                    data-backdrop="false" data-keyboard="false">
                    <mat-icon>turned_in_not</mat-icon>Access
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-2">
              <label for="inputEmail4">Item Code:</label>
              <input type="text" class="form-control disable-text" readonly formControlName="mrs_item_code"
                [(ngModel)]="mrs_item_code">
            </div>

            <div class="form-group col-md-6">
              <label for="inputEmail4">Item Description:</label>
              <input type="text" class="form-control disable-text" readonly formControlName="mrs_item_description">
            </div>

            <div class="form-group col-md-2">
              <label for="inputEmail4">Unit Of Mesurement:</label>
              <input type="text" class="form-control disable-text" readonly formControlName="mrs_uom">
            </div>

            <div class="form-group col-md-2">
              <label for="inputEmail4">Order qty:</label>
              <div class="input-group searchBtnStyle">
                <input type="number" class="form-control text-required-color" formControlName="mrs_order_qty"
                  [(ngModel)]="mrs_order_qty" />
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">
                    <span class="span-size">.00</span>
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="">
            <button (click)="addItemToList()" mat-stroked-button color="primary" [disabled]="!itemReqForm.valid"
              type="button"><span class="fa fa-plus"></span> Add to List</button>
          </div>
          <br>
        </div>

        <div class="partition-div">Added Item List</div><br>

        <div class="added-items">
          <div class="col-lg-12 items-div tbl-text">
            <table class="table table-bordered table-sm">
              <thead>
                <th class="th-bold">No.</th>
                <th>Item Code</th>
                <th>Item Description</th>
                <th>Quantity</th>
                <th>UOM</th>
                <th>Action</th>
              </thead>
              <tbody>
                <tr *ngFor="let item of addedItemList; let i = index">
                  <td>{{i + 1}}</td>
                  <td>{{item.mrs_item_code}}</td>
                  <td>{{item.mrs_item_description}}</td>
                  <td>{{item.mrs_order_qty}}</td>
                  <td>{{item.mrs_uom}}</td>
                  <td>
                    <button mat-stroked-button (click)="removeItem(i)" class="editbtnStyle"><span class="fa fa-trash">
                      </span> </button>
                  </td>
                </tr>
              </tbody>
            </table>

            <div class="add-order-btn">
              <button id="requestOrderModalClose" [hidden]="true" data-dismiss="modal">close</button>
              <button (click)="addOrdersSubmit()" mat-stroked-button color="primary"
                [disabled]="addedItemList.length === 0" type="button"><span class="fa fa-plus"></span> Save
                Order/s</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- edit order modal ******************************************************************************************************************************************** -->
<div class="modal" role="dialog" id="editParent">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Edit Order Description Form</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editParent">
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="inputEmail4">Created By:</label>
              <input type="text" class="form-control" formControlName="mrs_id" readonly>
            </div>

            <div class="form-group col-md-8">
              <label for="inputEmail4">Order Descripton:</label>
              <input type="text" class="form-control required-text" formControlName="mrs_req_desc">
            </div>
          </div>

          <div class="modal-footer">
            <button id="editParentModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
              color="primary">close</button>
            <button mat-stroked-button [disabled]="!editParent.valid" color="primary"
              (click)="updateParentSubmit()">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- view order modal ******************************************************************************************************************************************** -->
<div class="modal" role="dialog" id="viewOrder">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">View Material Request</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <h5 style="font-weight: bold; display: inline;">Order List</h5>
        <div class="order-title">
          {{parentTitle}}
          <ng-container *ngIf="Role === 'Admin' || approverRole === false || requestorFound === 1 ">
            <button mat-stroked-button class="editbtnStyle" (click)="clickUpdateItems()"><span class="fa fa-pencil">
              </span></button>
          </ng-container>
        </div>
        <div class="col-lg-12 items-div">
          <table class="table table-bordered table-sm">
            <thead>
              <th class="th-bold">Code</th>
              <th>Item Description</th>
              <th>Order</th>
              <th>UOM</th>
              <th>Serve</th>
              <th class="display-none">Remarks</th>
              <ng-template [ngIf]="requestorFound === 1">
                <th>Action</th>
              </ng-template>

            </thead>
            <tbody *ngFor="let parent of viewAddedItemList">
              <tr *ngFor="let item of parent.material_request_logs">
                <td>{{item.mrs_item_code}}</td>
                <td>{{item.mrs_item_description}}</td>
                <td>{{item.mrs_order_qty}}</td>
                <td>{{item.mrs_uom}}</td>
                <td>{{item.mrs_served_qty}}</td>
                <td class="display-none">
                  <button mat-stroked-button class="editbtnStyle" data-toggle="modal"
                    data-target="#viewItemRemarksFromList" data-backdrop="false" data-keyboard="false"
                    (click)="viewRemarksItemFromList(item)"><span class="fa fa-eye"></span> View </button>
                </td>
                <ng-template [ngIf]="requestorFound === 1">
                  <td>
                    <button id="viewModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
                      color="primary">close</button>
                    <button mat-stroked-button color="primary" class="editbtnStyle" data-toggle="modal"
                      data-target="#editItemFromList" data-backdrop="false" data-keyboard="false"
                      (click)="editItemFromList(item)"><span class="fa fa-pencil"></span> Edit </button>
                  </td>
                </ng-template>
              </tr>
            </tbody>
          </table>
        </div>

        <br><br>

        <div class="col-lg-12">
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="inputEmail4" class="italic-text">Ordered by:</label><br>

              <span>{{OrderBy}}</span> &nbsp;&nbsp;&nbsp; &nbsp;<span>{{OrderDate}}</span>
            </div>

            <div class="form-group col-md-4">
              <label for="inputEmail4" class="italic-text">Approved by:</label><br>

              <span>{{ApprovedBy}}</span> &nbsp;&nbsp;&nbsp; &nbsp; <span>{{ApprovedDate}}</span>
            </div>

            <div class="form-group col-md-4">
              <label for="inputEmail4" class="italic-text">Issued by:</label><br>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- cancel order modal ****************************************************************************************************************************************** -->
<div class="modal" role="dialog" id="cancelOrderModal">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Cancel Order Request Form</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="cancelOrderRequestForm">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="inputEmail4">Cancelled Date:</label>
              <input type="text" class="form-control" [value]="toDaysDate" readonly>
            </div>
            <div class="form-group col-md-12">
              <label for="inputEmail4">Cancelled By:</label>
              <input type="text" class="form-control" formControlName="is_cancel_by" readonly>
            </div>
            <div class="form-group col-md-12">
              <label for="inputEmail4">Reason:</label>
              <select class="form-control" formControlName="is_cancel_reason">
                <option *ngFor="let item of cancelReasonList" [value]="item.soar_desc">{{ item.soar_desc }}</option>
              </select>
            </div>
            <input type="number" class="form-control" [hidden]="true" [(ngModel)]="mrs_id" formControlName="mrs_id"
              readonly>
          </div>

          <div class="modal-footer">
            <button id="cancelOrderRequestModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
              color="primary">close</button>
            <button mat-stroked-button [disabled]="!cancelOrderRequestForm.valid" color="primary"
              (click)="cancelRequestOrderSubmit()">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- return order modal ****************************************************************************************************************************************** -->
<div class="modal" role="dialog" id="ReturnOrderRequest">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Return Order Request</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="returnOrderRequestForm">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="inputEmail4">Return Date:</label>
              <input type="text" class="form-control" [value]="toDaysDate" readonly>
            </div>

            <div class="form-group col-md-12">
              <label for="inputEmail4">Reason:</label>
              <select class="form-control">
                <option *ngFor="let item of returnReasonList" [value]="item.soar_desc">{{ item.soar_desc }}</option>
              </select>
            </div>
            <input type="number" class="form-control" [hidden]="true" [(ngModel)]="mrs_id" formControlName="mrs_id"
              readonly>
          </div>

          <div class="modal-footer">
            <button id="returnOrderRequestModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
              color="primary">close</button>
            <button mat-stroked-button [disabled]="!returnOrderRequestForm.valid" color="primary"
              (click)="returnRequestOrderSubmit()">Return</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- view cancel reason modal ************************************************************************************************************************************ -->
<div class="modal" role="dialog" id="viewCancelReason">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">View Reason</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>
          {{mrs_cancel_reason}}
        </p>
      </div>
    </div>
  </div>
</div>




<!-- ITEMS -->
<!-- delete item modal ******************************************************************************************************************************************* -->
<div class="modal" role="dialog" id="deleteItemFromList">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Remove Item From List Form</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="removeItemForm">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="inputEmail4">Item Code:</label>
              <input type="text" class="form-control" formControlName="Item_code" readonly>
            </div>
            <input type="text" class="form-control" [hidden]="true" [(ngModel)]="mrs_id" formControlName="mrs_id"
              readonly>
          </div>

          <div class="modal-footer">
            <button id="removeItemtModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
              color="primary">close</button>
            <button mat-stroked-button [disabled]="!removeItemForm.valid" color="primary"
              (click)="removeItemListSubmit()">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- edit item modal ********************************************************************************************************************************************* -->
<div class="modal" role="dialog" id="editItemFromList">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">Edit Item From List</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editItemForm">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="inputEmail4">Item Code:</label>
              <input type="text" class="form-control" formControlName="mrs_item_code" readonly>
            </div>
            <div class="form-group col-md-12">
              <label for="inputEmail4">Order qty:</label>
              <input type="number" class="form-control" formControlName="mrs_order_qty">
            </div>
            <input type="number" class="form-control" [hidden]="true" [(ngModel)]="mrs_id" formControlName="id"
              readonly>
          </div>

          <div class="modal-footer">
            <button id="editItemtModalClose" [hidden]="true" data-dismiss="modal" mat-stroked-button
              color="primary">close</button>
            <button mat-stroked-button [disabled]="!editItemForm.valid" color="primary"
              (click)="editItemListSubmit()">Update</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- view item remarks modal ************************************************************************************************************************************* -->
<div class="modal" role="dialog" id="viewItemRemarksFromList">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-all text-white">
        <div class="modal-title">View Remarks</div>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>
          {{mrs_remarks}}
        </p>
      </div>
    </div>
  </div>
</div>



<form novalidate="novalidate">
  <div class="modal" role="dialog" id="editModalModuleTagging">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header bg-all text-white">
          <div class="modal-title">Raw Materials</div>
          <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
        </div>
        <div class="modal-body">


          <div class="col-sm-12">
            <div class="d-flex">
              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-filter"></span></span>
                  </div>
                  <select class="form-control" id="drpSearchBy" name="SearchByRM" [(ngModel)]="searchByRM"
                    (change)="onFilterStatus($event.target.value)">
                    <option value="">All</option>
                    <option value="item_code">ITEM CODE</option>
                    <option value="item_description">DESCRIPTION</option>

                  </select>
                </div>
              </div>

              <div class="p-2">
                <div class="input-group searchBtnStyle">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1"><span class="fa fa-search"></span></span>
                  </div>
                  <input type="search" class="form-control " placeholder="Find here...." id="txtSearchText"
                    autocomplete="off" name="SearchTextRM" [(ngModel)]="searchTextRM" autofocus="off"
                    (keyup)="onSearchTextChange($event)">
                </div>
              </div>

            </div>
          </div>


          <div class="row">
            <div class="column">
              <div class="title-tagging-desc">List of Raw Material: {{totalRoleModulesUntaggedNewRowCount}}</div>
              <div class="col-lg-12 mx-auto">
                <table class="table table-striped table-bordered nowrap table-responsive-sm" style="width:100%">
                  <tr class="text-light header-bg-color-um system-name">

                    <th class="text-center" style="width:16%">Item Code</th>
                    <th class="text-center" style="width:16%">Description</th>
                    <th class="text-center" style="width:16%">Category</th>
                    <th class="text-center" style="width:16%">Uom</th>
                    <th class="text-center" style="width:16%">Actions</th>
                  </tr>

                  <tr *ngFor="let item of itemList | paging : currentPageIndexRM : pageSize;
                   let i = index">

                    <td>{{item.item_code}}</td>
                    <td>{{item.item_description}}</td>
                    <td>{{item.sub_category}}</td>
                    <td>{{item.primary_unit}}</td>
                    <td class="text-center">
                      <button mat-stroked-button color="primary" class="editbtnStyle"
                        (click)="onSelectRMClick($event, item)">
                        <mat-icon>remove_circle_outline</mat-icon> Select
                      </button>&nbsp;
                    </td>
                  </tr>
                </table>

                <div class="col-12">
                  <ul class="pagination justify-content-center mt-1">
                    <li class="page-item" (click)="onPageIndexClickedRM(currentPageIndexRM - 1)">
                      <a mat-stroked-button color="primary" class="mr-1 font-color-black" href="#"
                        onclick="return false">Prev</a>
                    </li>

                    <ng-container *ngIf="pagesRawMats.length <= 10">
                      <li class="page-item" *ngFor="let page of pagesRawMats"
                        [ngClass]="{ 'link-active-paging': page.pageIndex == currentPageIndexRM}"
                        (click)="onPageIndexClickedRM(page.pageIndex)">
                        <a class="page-link" href="#" onclick="return false">{{page.pageIndex + 1}}</a>
                      </li>
                    </ng-container>

                    <ng-container *ngIf="pagesRawMats.length > 10">
                      <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexRM == 0}"
                        (click)="onPageIndexClickedRM(0)">
                        <a class="page-link" href="#" onclick="return false">1</a>
                      </li>

                      <li class="page-item" [ngClass]="{ 'link-active-paging': currentPageIndexRM == 1}"
                        (click)="onPageIndexClickedRM(1)">
                        <a class="page-link" href="#" onclick="return false">2</a>
                      </li>

                      <li
                        *ngIf="currentPageIndexRM > 1 && currentPageIndexRM < pagesRawMats.length - 2">
                        &nbsp;...&nbsp;</li>

                      <li class="page-item" [ngClass]=" 'link-active-paging' "
                        (click)="onPageIndexClickedRM(currentPageIndexRM)"
                        *ngIf="currentPageIndexModuleTagged > 1 && currentPageIndexRM < pagesRawMats.length - 2">
                        <a class="page-link" href="#" onclick="return false">{{currentPageIndexRM + 1}}</a>
                      </li>

                      <li>&nbsp;...&nbsp;</li>

                      <li class="page-item"
                        [ngClass]="{ 'link-active-paging': currentPageIndexRM == pagesRawMats.length - 2}"
                        (click)="onPageIndexClickedRM(pagesRawMats.length - 2)">
                        <a class="page-link" href="#" onclick="return false">{{pagesRawMats.length - 1}}</a>
                      </li>

                      <li class="page-item"
                        [ngClass]="{ 'link-active-paging': currentPageIndexRM == pagesRawMats.length - 1}"
                        (click)="onPageIndexClickedRM(pagesRawMats.length - 1)">
                        <a class="page-link" href="#" onclick="return false">{{pagesRawMats.length}}</a>
                      </li>
                    </ng-container>

                    <li class="page-item" (click)="onPageIndexClickedRM(currentPageIndexRM + 1)">
                      <a mat-stroked-button color="primary" class="ml-1 font-color-black" href="#"
                        onclick="return false">Next</a>
                    </li>
                  </ul>
                </div>


              </div>


            </div>

          </div>




        </div>
        <div class="modal-footer">
          <button mat-stroked-button color="accent" class="mr-1" id="editCancelModalRM" data-dismiss="modal"
            type="button">Cancel</button>

        </div>
      </div>
    </div>
  </div>
</form>
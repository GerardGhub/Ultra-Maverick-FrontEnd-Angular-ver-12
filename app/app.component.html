<ngx-spinner>
  <h3>Loading...</h3>
</ngx-spinner>
<mat-toolbar color="primary" fxLayout="row" fxLayoutAlign="space-between center" class="nav">
  <!-- left box of toolbar starts -->
  <div fxLayout="row" fxLayoutAlign="space-between center">
    <ng-container *ngIf="loginService.currentUserName != null">
      <button mat-icon-button matTooltip="Sidebar" (click)="drawer.toggle()" (click)="ngOnInit()">
        <mat-icon>menu</mat-icon>
      </button>
    </ng-container>
    <!-- <a mat-icon-button matTooltip="Dashboard" [routerLink]="[ '/admin/dashboard' ]">
      <mat-icon>home</mat-icon>
      <span class="system-name">Ultra Maverick</span>
    </a> -->
    <div class="umLogo">
    </div>

  </div>
  <!-- left box of toolbar ends -->

  <!-- center box of toolbar starts -->
  <!-- <div>
    <ng-container *ngIf="loginService.currentUserName != null">
      <button type="button" mat-stroked-button (click)="showStatistics = !showStatistics" fxHide.lt-md="true"
        matTooltip="Click to expand / collapse Statistics" matTooltipPosition="right" matTooltipClass="yellow-back"
        matTooltipShowDelay="200">
        <mat-icon>analytics</mat-icon>
        <span class="ml mr system-name">Statistics</span>
        <mat-icon class="rotatable" [ngClass]="{ 'rotate-180': showStatistics}">keyboard_arrow_down</mat-icon>
      </button>
    </ng-container>
  </div> -->
  <!-- center box of toolbar ends x -->

  <!-- right box of toolbar starts -->
  <div>
    <ng-container *ngIf="loginService.currentUserName != null">
      <button class="system-name" type="button" mat-stroked-button class="mr" fxHide.lt-md="true"
        [matMenuTriggerFor]="user" matTooltip="User" matTooltipClass="yellow-back">
        <mat-icon>account_circle</mat-icon> {{loginService.currentUserName | uppercase}}
      </button>

      <!-- <button type="button" mat-icon-button [matMenuTriggerFor]="notifications" class="ml mr" matTooltip="Notifications"
        matTooltipClass="yellow-back">
        <mat-icon matBadge="2" matBadgeColor="accent">notifications</mat-icon>
      </button>

      <button type="button" mat-icon-button [matMenuTriggerFor]="topmenu" matTooltip="Menu"
        matTooltipClass="yellow-back">
        <mat-icon>more_vert</mat-icon>
      </button> -->
    </ng-container>
  </div>

  <!-- menu starts -->
  <mat-menu #topmenu="matMenu">
    <!-- <a [routerLink]="[  '/admin', 'dashboard'  ]" mat-menu-item>Dashboard</a> -->
    <a [routerLink]=" [ '/about' ] " mat-menu-item>About</a>
    <ng-container *ngIf="loginService.currentUserName != null && loginService.currentUserRoleSession == 'Admin'">
      <!-- <a [routerLink]=" [ '/admin', 'masters' ] " mat-menu-item>Master Lists</a> -->
      <button mat-menu-item [matMenuTriggerFor]="user">User</button>
    </ng-container>
    <!-- <button mat-menu-item [matMenuTriggerFor]="bookings">Bookings</button> -->
  </mat-menu>

  <mat-menu #bookings="matMenu">
    <a [routerLink]="[ '/booking' ]" mat-menu-item>New Booking</a>
    <a [routerLink]="[ '/bookings-list' ]" mat-menu-item>Bookings List</a>
  </mat-menu>

  <mat-menu #user="matMenu">
    <!-- <button mat-menu-item>Profile</button>
    <button mat-menu-item>Change Password</button> -->
    <!-- <a class="nav-link"[routerLink]=" [ '/signup' ] ">Sign Up</a> -->
    <!-- <button mat-menu-item >Logout</button> -->
    <a class="nav-link" href="#" (click)="loginService.Logout()">Logout</a>
  </mat-menu>

  <mat-menu #notifications="matMenu">
    <button mat-menu-item>
      <mat-icon>email</mat-icon> Email from Converge
    </button>
    <mat-divider></mat-divider>
    <button mat-menu-item>
      <mat-icon>receipt_long</mat-icon> Send Bills to Customers
    </button>
  </mat-menu>

  <!-- menu ends -->
</mat-toolbar>


<mat-expansion-panel [expanded]="showStatistics">
  <div class="mt" fxLayout="row" fxLayoutAlign="space-evenly center" fxLayoutGap="20px">
    <div class="font-weight-bold">PO Summary:</div>
    <div matTooltip="Total Bookings in this week" matRipple class="p-10 hand-icon">
      <div>This Week:</div>
      <div class="font-weight-bold">{{108 | number}} Received</div>
    </div>

    <div matTooltip="Total Bookings in this month" matRipple class="p-10 hand-icon">
      <div>This Month:</div>
      <div class="font-weight-bold">{{1595 | number}} Received</div>
    </div>

    <div matTooltip="Total Bookings in this year" matRipple class="p-10 hand-icon">
      <div>This Year:</div>
      <div class="font-weight-bold">{{5894 | number}} Received</div>
    </div>
  </div>
</mat-expansion-panel>




<!-- Navigation **************************************************************************************************** -->
<mat-drawer-container class="drawer-container" [hasBackdrop]="true">
  <mat-drawer #drawer class="drawer" mode="push">
    <div class="user-logo">
      <mat-icon class="user-icon">person_outline</mat-icon>
      <div class="v-align-middle">{{loginService.currentUserRoleSession | uppercase}}</div>
    </div>
    <mat-divider></mat-divider>

    <!-- ADMIN ******************************************************************************************************************** -->
    <ng-container *ngIf="loginService.currentUserName != null && loginService.currentUserRoleSession == 'Admin'">
      <mat-nav-list class="sidebar-navlist">
        <a class="system-name" [routerLink]="[  '/admin', 'dashboard'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>dashboard_customize</mat-icon>
          &nbsp;Dashboard
        </a>
        <!-- PO Dashboard Module -->

        <!-- PO Recieving Module -->
        <ng-container *ngIf="QCReceiving === 1 ">
          <a class="system-name" [routerLink]=" [ '/admin', 'qc-recieving' ] " mat-list-item
            routerLinkActive="link-active">
            <mat-icon>local_shipping</mat-icon>&nbsp; QC Receiving &nbsp;&nbsp;
            <span class="badge badge-pill badge-danger zerobadge{{ totalPoRowCount | number}}">{{ totalPoRowCount |
              number}}</span>
          </a>
        </ng-container>

        <!-- wh recieving Module -->
        <ng-container *ngIf="WhReceiving === 1 ">
          <a [routerLink]=" [ '/admin', 'wh-recieving' ] " mat-list-item routerLinkActive="link-active">
            <mat-icon>inventory_2</mat-icon>&nbsp;WH Receiving &nbsp;&nbsp;
            <span class="badge badge-pill badge-danger zerobadge{{ totalPoPartialReceiving | number}}">{{
              totalPoPartialReceiving | number}}</span>
          </a>
        </ng-container>

        <!-- Approval Module -->
        <ng-container *ngIf="Approval === 1 ">
          <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
            [matMenuTriggerFor]="menu1">
            <mat-icon>check_box</mat-icon>
            &nbsp;Approval &nbsp;&nbsp;
            <span
              class="badge badge-pill badge-danger zerobadge{{totalPoPartialRejectatWH  + totalPoPartialReceivingNearlyExpiryApproval}}">{{
              totalPoPartialRejectatWH + totalPoPartialReceivingNearlyExpiryApproval }}</span>
          </a>


          <mat-menu #menu1="matMenu">
            <button mat-menu-item routerLinkActive="link-active">
              <!-- <mat-icon matBadgeColor="warn">event_busy</mat-icon> -->
              <span [routerLink]=" [ '/admin', 'nearly-expiry' ] ">Nearly Expiry</span> &nbsp;&nbsp;
              <span
                class="badge badge-pill badge-danger zerobadge{{ totalPoPartialReceivingNearlyExpiryApproval | number }}">{{
                totalPoPartialReceivingNearlyExpiryApproval | number }}</span>

            </button>
            <button mat-menu-item routerLinkActive="link-active">
              <!-- <mat-icon matBadgeColor="warn">category</mat-icon> -->
              <span [routerLink]=" [ '/admin', 'wh-rejection'] ">WH Rejection</span> &nbsp;&nbsp;
              <span class="badge badge-pill badge-danger zerobadge{{ totalPoPartialRejectatWH | number }}">{{
                totalPoPartialRejectatWH | number }}</span>
            </button>
          </mat-menu>

          <!-- Approval Module -->
        </ng-container>

        <ng-container *ngIf="LabTest === 1 ">
          <!-- Lab Test Module -->
          <a [routerLink]=" ['/admin', 'forlabtest'] " mat-list-item routerLinkActive="link-active">
            <mat-icon>hourglass_empty</mat-icon>&nbsp;Lab Test &nbsp;&nbsp;
            <span class="badge badge-pill badge-danger zerobadge{{ totalforlabtestforapproval | number }}">{{
              totalforlabtestforapproval | number }}</span>
          </a>
        </ng-container>
        <!-- Preparation Module -->
        <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu_prep">
          <mat-icon>add_shopping_cart</mat-icon>
          &nbsp;Preparation &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
            totalPreparationBadge | number }}</span>
        </a>
        <mat-menu #menu_prep="matMenu">
          <button mat-menu-item>
            <!-- <mat-icon>add_shopping_cart</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'store-order' ] ">Store Order/s <span
                class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
                totalPreparationBadge | number }}</span></span>
          </button>
          <button mat-menu-item>
            <!-- <mat-icon>add_shopping_cart</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'internal-order' ] ">Internal Order/s</span>
          </button>
        </mat-menu>

        <!-- Online MRS Module -->
        <a class="system-name" [routerLink]="[  '/admin', 'online-mrs'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>wallpaper</mat-icon>
          &nbsp;Online MRS &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
            totalPreparationBadge | number }}</span>
        </a>

        <!-- Set Up Module -->
        <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu">
          <mat-icon>settings_suggest</mat-icon>&nbsp;Set Up
        </a>
        <mat-menu #menu="matMenu">
          <button mat-menu-item>
            <!-- <mat-icon>people</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','user' ] ">User Role</span>
          </button>
          <button mat-menu-item>
            <!-- <mat-icon>people</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','user' ] ">User Modules</span>
          </button>
          <button mat-menu-item>
            <!-- <mat-icon>people</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','user' ] ">User Management</span>
          </button>
          <button mat-menu-item>
            <!-- <mat-icon>category</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','rmclassification' ] ">RM Receiving</span>
          </button>

          <button mat-menu-item>
            <!-- <mat-icon>query_stats</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','rmcancelandreturn' ] ">RM Cancel & Return</span>
          </button>

          <button mat-menu-item>
            <!-- <mat-icon>hourglass_empty</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','labtest' ] ">Laboratory Procedures and Remarks</span>
          </button>

          <button mat-menu-item>
            <!-- <mat-icon>high_quality</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'masters','qc-master-list' ] ">QC Check List</span>
          </button>

        </mat-menu>
      </mat-nav-list>

    </ng-container>


    <!-- Warehouse Checker ******************************************************************************************************** -->
    <ng-container
      *ngIf="loginService.currentUserName != null && loginService.currentUserRoleSession == 'WarehouseChecker'">
      <mat-nav-list class="sidebar-navlist">
        <a class="system-name" [routerLink]="[  '/admin', 'dashboard'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>dashboard_customize</mat-icon>
          &nbsp;Dashboard
        </a>

        <!-- Preparation Module -->
        <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu_prep">
          <mat-icon>add_shopping_cart</mat-icon>
          &nbsp;Preparation &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
            totalPreparationBadge | number }}</span>
        </a>
        <mat-menu #menu_prep="matMenu">
          <button mat-menu-item>
            <!-- <mat-icon>add_shopping_cart</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'store-order' ] ">Store Order/s <span
                class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
                totalPreparationBadge | number }}</span></span>
          </button>
          <button mat-menu-item>
            <!-- <mat-icon>add_shopping_cart</mat-icon> -->
            <span [routerLink]=" [ '/admin', 'internal-order' ] ">Internal Order/s</span>
          </button>
        </mat-menu>

      </mat-nav-list>
    </ng-container>


    <!-- QC STAFF ***************************************************************************************************************** -->
    <ng-container *ngIf="loginService.currentUserName != null && loginService.currentUserRoleSession == 'QC Staff'">
      <mat-nav-list class="sidebar-navlist">
        <a class="system-name" [routerLink]="[  '/admin', 'dashboard'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>dashboard_customize</mat-icon>&nbsp;Dashboard

        </a>
        <a class="system-name" [routerLink]=" [ '/admin', 'qc-recieving' ] " mat-list-item
          routerLinkActive="link-active">
          <mat-icon>local_shipping</mat-icon>
          &nbsp;&nbsp;QC Receiving &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPoRowCount | number}}">{{ totalPoRowCount |
            number}}</span>
        </a>

        <a class="system-name" [routerLink]=" [ '/admin', 'wh-recieving' ] " mat-list-item
          routerLinkActive="link-active">
          <mat-icon>inventory_2</mat-icon>
          &nbsp;&nbsp;WH Receiving &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPoPartialReceiving | number}}">{{
            totalPoPartialReceiving | number}}</span>
        </a>

        <!-- Online MRS Module -->
        <a class="system-name" [routerLink]="[  '/admin', 'online-mrs'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>wallpaper</mat-icon>
          &nbsp;Online MRS &nbsp;&nbsp;
          <!-- <span class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{ totalPreparationBadge | number }}</span> -->
        </a>

      </mat-nav-list>
    </ng-container>



    <!-- QC SUPERVISOR *********************************************************************************************************** -->
    <ng-container *ngIf="loginService.currentUserName != null && loginService.currentUserRoleSession == 'QCSupervisor'">
      <mat-nav-list class="sidebar-navlist">
        <a class="system-name" [routerLink]="[  '/admin', 'dashboard'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>dashboard_customize</mat-icon>&nbsp;Dashboard
        </a>

        <a class="system-name" [routerLink]=" [ '/admin', 'qc-recieving' ] " mat-list-item
          routerLinkActive="link-active">
          <mat-icon>local_shipping</mat-icon>&nbsp;QC RECEIVING
          <mat-icon class="zerobadge{{ totalPoRowCount | number}}" matBadge="{{ totalPoRowCount | number}}"
            matBadgeColor="warn"></mat-icon>
        </a>

        <a class="system-name" [routerLink]=" [ '/admin', 'wh-recieving' ] " mat-list-item
          routerLinkActive="link-active">
          <mat-icon>inventory_2</mat-icon>&nbsp;WH Receiving
          <mat-icon class="zerobadge{{totalPoPartialReceiving | number}}"
            matBadge="{{totalPoPartialReceiving | number}}" matBadgeColor="warn"></mat-icon>
        </a>

        <!-- Online MRS Module -->
        <a class="system-name" [routerLink]="[  '/admin', 'online-mrs'  ]" mat-list-item routerLinkActive="link-active">
          <mat-icon>wallpaper</mat-icon>
          &nbsp;Online MRS &nbsp;&nbsp;
          <span class="badge badge-pill badge-danger zerobadge{{ totalPreparationBadge | number }}">{{
            totalPreparationBadge | number }}</span>
        </a>

        <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu1">
          <mat-icon>check_box</mat-icon>&nbsp;Approval
          <mat-icon class="zerobadge{{totalPoPartialRejectatWH  + totalPoPartialReceivingNearlyExpiryApproval}}"
            matBadge="{{totalPoPartialRejectatWH + totalPoPartialReceivingNearlyExpiryApproval}}" matBadgeColor="warn">
          </mat-icon>
        </a>
        <mat-menu #menu1="matMenu">
          <button mat-menu-item>
            <mat-icon>event_busy</mat-icon>
            <span [routerLink]=" [ '/admin', 'nearly-expiry' ] ">Nearly Expiry</span>
            <mat-icon class="zerobadge{{totalPoPartialReceivingNearlyExpiryApproval | number}}"
              matBadge="{{totalPoPartialReceivingNearlyExpiryApproval | number}}" matBadgeColor="warn"></mat-icon>
          </button>
          <button mat-menu-item>
            <mat-icon>category</mat-icon>

            <span [routerLink]=" [ '/admin', 'wh-rejection'] ">WH Rejection</span>
            <mat-icon class="zerobadge{{totalPoPartialRejectatWH | number}}"
              matBadge="{{totalPoPartialRejectatWH | number}}" matBadgeColor="warn"></mat-icon>
          </button>
        </mat-menu>

        <a class="system-name" mat-list-item routerLinkActive="link-active" #menuTrigger="matMenuTrigger"
          [matMenuTriggerFor]="menu">
          <mat-icon>settings_suggest</mat-icon>&nbsp;Set Up
        </a>

        <mat-menu #menu="matMenu">
          <button mat-menu-item>
            <mat-icon>category</mat-icon>
            <span [routerLink]=" [ '/admin', 'masters','rmclassification' ] ">RM Receiving</span>
          </button>

          <button mat-menu-item>
            <mat-icon>query_stats</mat-icon>
            <span [routerLink]=" [ '/admin', 'masters','rmcancelandreturn' ] ">RM Cancel & Return</span>
          </button>
        </mat-menu>
      </mat-nav-list>
    </ng-container>


  </mat-drawer>

  <div class="main">
    <div class="container-fluid" [@routeAnimations]="getState(outlet)">
      <router-outlet #outlet="outlet"></router-outlet>
    </div>

  </div>

  <div class="footerStyle">
    <p>Copyright @ 2022 - Ultra Maverick System</p>
  </div>
</mat-drawer-container>